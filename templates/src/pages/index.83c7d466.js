(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{134:function(e,t,a){"use strict";var n=a(8),c=a.n(n),l=a(47),r=a.n(l),i=a(0),o=a.n(i),s=a(135),u=a.n(s).a.sortBy(["#000000","#ffffff","#c600ff","#4fe3c1","#25d3ff","#f5c7c7","#c191e5","#4890e4","#e2013a"]),m=function(e){var t=e.setBgColor,a=u.map(function(e){return o.a.createElement("li",{className:"list-inline-item p-4 rounded",style:{backgroundColor:e},onClick:function(a){t(e),window.gtag("event","select_color",{color:e})}})});return o.a.createElement("ul",{className:"list-inline py-2 m-0"},a)},f={x:0,y:0},g=[0,0],d=[0,0],h=r()({},f),v=1;var p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8BQDwAEhQGAhKmMIQAAAABJRU5ErkJggg==";t.a=function(e){var t=e.url,a=e.dzRef,n=e.setDZProps,l=Object(i.useRef)(null),s=Object(i.useState)(r()({},f)),u=c()(s,2),b=u[0],w=u[1],E=Object(i.useState)(r()({},f)),A=c()(E,2),y=A[0],x=A[1],S=Object(i.useState)(1),N=c()(S,2),O=N[0],C=N[1],j=Object(i.useState)([]),R=c()(j,2),k=R[0],z=R[1],B=Object(i.useState)("#ffffff"),P=c()(B,2),L=P[0],U=P[1];Object(i.useEffect)(function(){var e=r()({},f),t=1;if(l.current&&k.length){var a=l.current.getBoundingClientRect();g=[.5*a.width,.5*a.height],d=[.5*k[0],.5*k[1]];var n=[g[0]-d[0],g[1]-d[1]];e.x=n[0],e.y=n[1];var c=k[0]>a.width||k[1]>a.height,i=k[0]>=k[1];c&&(t=i?a.width/k[0]:a.height/k[1])}w(r()({},e)),x(r()({},f)),C(t),h=r()({},e),v=t},[t,k]),Object(i.useEffect)(function(){n({imgSize:k,scale:O,bgColor:L})},[k,O,b,t,l,L]),Object(i.useEffect)(function(){return function(e,t){var a=e.current,n=t.setPos,c=t.setOffset,l=t.setScale,i=t.setLog;if(a){console.log("initPan");var o=new Hammer(a);o.get("pinch").set({enable:!0}),o.on("pinch pinchend",function(e){var t=e.scale,a=(e.isFinal,e.type),n=v*t;"pinchend"===a?v=n:"pinch"===a&&l(n),i({LAST_SCALE:v,scale:t,s:n,type:a})}),o.on("pan",function(e){var t=e.deltaX,a=e.deltaY,l=e.isFinal;c({x:t,y:a}),l&&(h.x=t+h.x,h.y=a+h.y,n(r()({},h)),c(r()({},f)))})}}(l,{setPos:w,setOffset:x,setScale:C,setLog:console.log})},[l]);var _=y.x+b.x,F=y.y+b.y,M="img-preview "+(y.y||y.x?"dragging":""),D={transform:"translate3d(".concat(_,"px, ").concat(F,"px, 0) scale3d(").concat(O,", ").concat(O,", ").concat(O,")")};return o.a.createElement("div",{className:"dragZone mx-auto"},o.a.createElement("div",{className:"img-wrap",ref:a,style:{backgroundColor:L}},o.a.createElement("img",{onLoad:function(e){return function(e,t){var a=e.target;t([a.width,a.height])}(e,z)},className:M,src:t||p,style:D,alt:"Preview"}),o.a.createElement("div",{id:"pan-zone",ref:l})),o.a.createElement(m,{setBgColor:U}))}},50:function(e,t,a){"use strict";a.r(t);var n=a(47),c=a.n(n),l=a(8),r=a.n(l),i=a(0),o=a.n(i),s=a(136),u=a.n(s),m=a(137),f=a.n(m),g=(a(133),a(134)),d=1080;var h=[{value:"square",label:"1:1"},{value:"four-five",label:"4:5"}],v=0;function p(e,t){e.nativeEvent;var a=t.dzRef,n=t.setPreview,c=t.imgSize,l=t.scale;if(a.current){var r=a.current.getBoundingClientRect(),i=r.width,o=r.height,s=function(e){var t=e.imgSize,a=e.scale,n=e.viewport;if(!t||!t.length)return-1;var c=n.width;return a<1?Math.min(t[0],d):1===a?Math.min(Math.min(t[0],c)/a,d):Math.min(t[0]/a,d)}({imgSize:c,scale:l,viewport:r}),m=s/i,f=.5*(s-i),g=.5*(o*m-o),h=function(){u.a.toBlob(a.current,{quality:.95,height:o*m,width:s,style:{transform:"translate3d(".concat(f,"px, ").concat(g,"px, 0) scale3d(").concat(m,", ").concat(m,", ").concat(m,")")}}).then(function(e){var t=URL.createObjectURL(e);n(t)})};v||(h(),v++),setTimeout(h,100),window.gtag("event","composite_image")}}function b(){window.gtag("event","save_image")}t.default=function(){var e=Object(i.useState)(null),t=r()(e,2),a=t[0],n=t[1],l=Object(i.useState)(null),s=r()(l,2),u=s[0],m=s[1],d=Object(i.useState)(null),v=r()(d,2),w=v[0],E=v[1],A=Object(i.useRef)(null),y=Object(i.useState)(),x=r()(y,2),S=x[0],N=x[1],O="pt-5 px-3 border "+(u?"bg-light "+u:" text-secondary not-allowed"),C="py-5 px-3 "+(a?"":"text-secondary not-allowed"),j="py-5 px-3  border "+(w?"":"text-secondary not-allowed"),R="btn "+(a?"btn-primary text-white":"btn-light"),k="btn "+(w?"btn-primary text-white":"btn-light");Object(i.useEffect)(function(e){return E(null)},[S,u]);var z=h.map(function(e){var t=e.label,a=e.value;return o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"mr-3",type:"radio",name:"canvas",value:a,id:a,onChange:function(e){return function(e,t){var a=e.target;t(a.value),window.gtag("event","change_canvas_ratio",{value:a.value})}(e,m)}}),o.a.createElement("label",{className:"input-group-text",htmlFor:a},t))});return o.a.createElement("div",null,o.a.createElement("section",{className:"py-5 px-3 "},o.a.createElement("h3",{className:"h4 m-0"},"1. Select the Canvas"),z),o.a.createElement("section",{className:O},o.a.createElement("h3",{className:"h4 m-0 m-0"}," 2. Select the Photo"),o.a.createElement("div",{class:"my-3 custom-file"},o.a.createElement("input",{type:"file",class:"custom-file-input",id:"file",accept:"image/png, image/jpeg",onChange:function(e){return function(e,t){var a=e.target;a.files&&a.files[0]&&(t(URL.createObjectURL(a.files[0])),window.gtag("event","browse_file",{name:a.files[0].name}))}(e,n)}}),o.a.createElement("label",{class:"custom-file-label",htmlFor:"file"})),o.a.createElement(g.a,{dzRef:A,setDZProps:N,url:a})),o.a.createElement("section",{className:C},o.a.createElement("h3",{className:"h4 m-0"},"3."," ",o.a.createElement("a",{className:R,onClick:function(e){return p(e,c()({dzRef:A,setPreview:E,ratio:u},S))}},"Render"))),o.a.createElement("section",{className:j},o.a.createElement("h3",{className:"h4 m-0"},"4."," ",o.a.createElement(f.a,{time:1.5,onClickNHold:b},o.a.createElement(o.a.Fragment,null,o.a.createElement("a",{role:"button",className:k,href:w,target:"_blank",download:"InstaFit-"+Date.now(),onContextMenu:b,onClick:b},"Right Click to Save the rendered image"),o.a.createElement("img",{className:"w-100 mt-3",src:w,alt:"",onContextMenu:b}))))))}}}]);